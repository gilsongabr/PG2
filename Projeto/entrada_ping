#!/bin/bash
#Gilson Gabriel Zozias de Santana

DIR="Saida"
mkdir -p $DIR

declare -a arr=("AC" "RO" "RS" "SC" "MT" "MS" "PR" "SP" "GO" "TO" "DF" "RJ" "RR" "AM" "BA" "ES" "MG" "SE" "AP" "AL" "CE" "MA" "PA" 
	"PI" "PE" "RN" "PB_JPA" "PB_CGE" "EBT1" "EBT2" "EBT3" "EBT4" "EBT5" "INT1" "INT2" "INT3" "INT4" "FN")

declare -a ayy=("200.129.175.129" "200.129.139.132" "200.132.0.134" "200.237.192.33" "200.129.240.1" "200.129.207.44"
	"200.238.130.8" "200.133.192.80" "200.18.160.3" "200.139.26.17" "200.19.119.125" "200.143.193.3" "200.129.143.4" "200.129.156.1" 
	"200.128.0.18" "200.137.85.164" "200.131.1.75" "200.17.118.9" "200.129.167.34" "200.17.116.100" "200.129.0.42" "200.137.129.135" 
	"200.129.132.98" "200.137.160.130" "200.133.0.140" "200.137.0.40" "200.129.64.141" "200.129.64.144" "200.210.254.1" "200.210.253.1" 
	"200.210.249.1" "200.210.248.1" "200.210.247.1" "204.153.48.13" "204.153.49.74" "204.153.51.66" "128.112.100.126" "199.99.99.99")

declare -a att=("200.129.175.129" "200.129.139.132" "200.132.0.134" "200.237.192.33" "200.129.240.1" "200.129.207.44"
	"200.238.130.8" "200.133.192.80" "200.18.160.3" "200.139.26.17" "200.19.119.125" "200.143.193.3" "200.129.143.4" "200.129.156.1" 
	"200.128.0.18" "200.137.85.164" "200.131.1.75" "200.17.118.9" "200.129.167.34" "200.17.116.100" "200.129.0.42" "200.137.129.135" 
	"200.129.132.98" "200.137.160.130" "200.133.0.140" "200.137.0.40" "200.129.64.141" "200.129.64.144" "200.210.254.1" "200.210.253.1" 
	"200.210.249.1" "200.210.248.1" "200.210.247.1" "204.153.48.13" "204.153.49.74" "204.153.51.66" "128.112.100.126" "199.99.99.99")

declare -i number 
number=0
declare -i number1 
number1=1

for i in "${arr[@]}"
do 
	for k in "${att[@]}"
	do
		ip netns exec r$number1 fping -S ${ayy["$number"]} $k >> "$DIR/"$i.txt
		ip netns exec r$number1 traceroute -s ${ayy["$number"]} $k >> "$DIR/"$i.txt
		
	sleep 2
	done	
	if (($number1 == 28)); then
		number1=49
	elif (($number1 == 54)); then
		number1=69
	elif (($number1 == 73)); then
		number1=98
	fi
	((number++))
	((number1++))

done
